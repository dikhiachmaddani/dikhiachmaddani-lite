---
import type { Project } from '@/domain/project';
import ProjectCard from '../card/ProjectCard.astro';

interface Props {
  projects: Project[];
  title: string;
  description: string;
}

const { projects, title, description } = Astro.props;
---

<section class="py-5">
  {
    Astro.url.pathname !== '/projects' ? (
      <div class="flex items-center justify-between gap-2 mb-2">
        <h1 class="text-xl md:text-2xl font-bold text-[#0C3F33]">{title}</h1>
        <div class="group relative text-xs md:text-sm/6 text-[#0C3F33]">
          <a href="/projects" class="absolute inset-0 border border-dashed border-[#0C3F33]/60 bg-[#0C3F33]/10 group-hover:bg-[#0C3F33]/15" />
          <div
            class="text-sm md:text-base font-bold text-[#0C3F33] px-4 py-1 rounded-full flex items-center gap-1">
            See More <span class="icon-[lucide--arrow-up-right]" />
          </div>

          <svg
            width="5"
            height="5"
            viewBox="0 0 5 5"
            class="absolute top-[-2px] left-[-2px] fill-[#0C3F33]"
          >
            <path d="M2 0h1v2h2v1h-2v2h-1v-2h-2v-1h2z" />
          </svg>
          <svg
            width="5"
            height="5"
            viewBox="0 0 5 5"
            class="absolute top-[-2px] right-[-2px] fill-[#0C3F33]"
          >
            <path d="M2 0h1v2h2v1h-2v2h-1v-2h-2v-1h2z" />
          </svg>
          <svg
            width="5"
            height="5"
            viewBox="0 0 5 5"
            class="absolute bottom-[-2px] left-[-2px] fill-[#0C3F33]"
          >
            <path d="M2 0h1v2h2v1h-2v2h-1v-2h-2v-1h2z" />
          </svg>
          <svg
            width="5"
            height="5"
            viewBox="0 0 5 5"
            class="absolute bottom-[-2px] right-[-2px] fill-[#0C3F33]"
          >
            <path d="M2 0h1v2h2v1h-2v2h-1v-2h-2v-1h2z" />
          </svg>
        </div>
      </div>
    ) : (
      <h1 class="text-xl md:text-2xl font-bold text-[#0C3F33]">{title}</h1>
    )
  }

  <p class="text-sm md:text-base text-[#0C3F33]/80 pb-4 pt-2">{description}</p>
  <div class="relative grid grid-cols-12 gap-5 pb-4">
    {
      projects.length > 0 ? 
      Astro.url.pathname !== '/projects' ? (
        projects.slice(0, 6).map((project) => (
          <ProjectCard
            title={project.data.title}
            description={project.data.description}
            href={`/projects/${project.slug}`}
            stack={project.data.stack}
          />
        ))
      ) : (
        projects
          .map((project) => (
            <ProjectCard
              title={project.data.title}
              description={project.data.description}
              href={`/projects/${project.slug}`}
              stack={project.data.stack}
            />
          ))
      ) : (
        <p class="col-span-12 text-left text-base text-[#0C3F33]/80 pb-4 pt-2">
          Still in the content filling stage of the project.
        </p>
      )
    }
  </div>
</section>
